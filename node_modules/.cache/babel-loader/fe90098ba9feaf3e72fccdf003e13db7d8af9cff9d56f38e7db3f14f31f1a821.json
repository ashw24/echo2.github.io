{"ast":null,"code":"import'./google.css';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faCamera}from'@fortawesome/free-solid-svg-icons';// Import the camera icon\nimport{useAuthContext}from'../hooks/useAuthContext';import React,{useState,useEffect,useRef}from'react';import{useNavigate}from'react-router-dom';// Import useNavigate\nimport{useLogout}from\"../hooks/useLogout\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Rectangle=()=>{return/*#__PURE__*/_jsx(\"div\",{className:\"rectangle\"});};const Verify=()=>{const{user,dispatch}=useAuthContext();const navigate=useNavigate();const videoRef=useRef(null);const[stream,setStream]=useState(null);const[capturedImage,setCapturedImage]=useState(null);const{logout}=useLogout();const handleLogout=()=>{logout();};useEffect(()=>{const fetchUser=async()=>{console.log(\"fetching user\");const response=await fetch(\"http://localhost:4000/auth/googleUser\",{credentials:'include',mode:'cors'});console.log(\"fetched user:\");const json=await response.json();console.log(json);if(response.ok){dispatch({type:\"LOGIN\",payload:json});}};fetchUser();},[dispatch]);const[showContactModal,setShowContactModal]=useState(false);const[showLoginModal,setShowLoginModal]=useState(false);const getWebcam=async()=>{try{const mediaStream=await navigator.mediaDevices.getUserMedia({video:true});setStream(mediaStream);if(videoRef.current){videoRef.current.srcObject=mediaStream;}}catch(error){console.error('Error accessing the webcam',error);}};const handleCaptureOrReset=()=>{if(capturedImage){// Reset for a new capture\nsetCapturedImage(null);getWebcam();}else{// Capture the image\ntakePicture();}};const resetCapture=async()=>{setCapturedImage(null);await getWebcam();// Restart webcam\n};const takePicture=()=>{if(stream&&videoRef.current){const videoElement=videoRef.current;const canvas=document.createElement('canvas');canvas.width=videoElement.videoWidth;canvas.height=videoElement.videoHeight;canvas.getContext('2d').drawImage(videoElement,0,0,canvas.width,canvas.height);const imageSrc=canvas.toDataURL('image/png');setCapturedImage(imageSrc);// Optionally stop the webcam stream\n// stream.getTracks().forEach(track => track.stop());\n// setStream(null);\n}};useEffect(()=>{getWebcam();},[]);const openModal=modalName=>{if(modalName==='showContactModal'){setShowContactModal(true);}else if(modalName==='showLoginModal'){setShowLoginModal(true);}};const closeModal=modalName=>{if(modalName==='showContactModal'){setShowContactModal(false);}else if(modalName==='showLoginModal'){setShowLoginModal(false);}};const handleSubmit=async()=>{console.log(\"name\",user.name);console.log('Submit this image:',capturedImage);const parts=capturedImage.split(',');const Image=parts[1];// Check if the data is 'placeholder'\nif(user.public==='placeholder'&&user.private==='placeholder'){// Fetch the keys from the server\nconst keyResponse=await fetch(\"http://localhost:5000/create_key\");const keys=await keyResponse.json();console.log(\"key\",keys);// Update the user object with the received keys\nconst new_public=keys.public;const new_private=keys.private;user.public=keys.public;user.private=keys.private;console.log(\"JSON\",keys.public,keys.private);console.log(\"After Defined\",new_public,new_private);const response1=await fetch(\"http://localhost:4000/api/person/\".concat(user._id),{method:\"PATCH\",credentials:'include',mode:'cors',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({public:new_public,private:new_private})});if(response1.ok){console.log(\"NEW\",new_public,new_private);console.log(\"OK\",user.public,user.private);const updated=await response1.json();dispatch({type:\"LOGIN\",payload:updated});}}const response=await fetch(\"http://localhost:4000/api/data/face\",{method:\"POST\",credentials:'include',mode:'cors',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:user.id,image:Image})});console.log(\"fetched user:\");const json=await response.json();console.log(json);// Extracting face match result\nconst faceMatchResult=json.matchedFaces[0].matchResult;// Conditional routing based on face match result\nif(faceMatchResult===1){navigate('../verified');// Redirect to verified.js if match is found\n//mint_nft\nconsole.log(\"mintingnft\");const tokenResponse=await fetch(\"http://localhost:5000/create_token\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({service:\"Uber\",user_public_key:user.public})});const data=await tokenResponse.json();console.log(\"Message:\",data.message);console.log(\"Transaction ID:\",data.transaction_id);const updatetrans=await fetch(\"http://localhost:4000/api/person/\".concat(user._id),{method:\"PATCH\",credentials:'include',mode:'cors',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({transactions:user.transactions.concat(data.transaction_id)})});if(updatetrans.ok){const updated=await updatetrans.json();dispatch({type:\"LOGIN\",payload:updated});}}else{navigate('../failed');// Redirect to failed.js if no match is found\n}};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"main\",{className:\"App-main\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"video-box\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Verify\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"video-container\",children:[!capturedImage&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,style:{width:'100%',height:'auto'}}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel\",onClick:takePicture,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCamera})})]}),capturedImage&&/*#__PURE__*/_jsxs(\"div\",{className:\"image-preview\",children:[/*#__PURE__*/_jsx(\"img\",{src:capturedImage,alt:\"Captured\",style:{maxWidth:'100%',maxHeight:'100%',width:'auto',height:'auto',objectFit:'contain',objectPosition:'center'}}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel\",onClick:resetCapture,children:\"Retake Picture\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel\",onClick:handleSubmit,children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel\",onClick:handleLogout,children:\"Cancel\"})]})]})]})})});};export default Verify;","map":{"version":3,"names":["FontAwesomeIcon","faCamera","useAuthContext","React","useState","useEffect","useRef","useNavigate","useLogout","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Rectangle","className","Verify","user","dispatch","navigate","videoRef","stream","setStream","capturedImage","setCapturedImage","logout","handleLogout","fetchUser","console","log","response","fetch","credentials","mode","json","ok","type","payload","showContactModal","setShowContactModal","showLoginModal","setShowLoginModal","getWebcam","mediaStream","navigator","mediaDevices","getUserMedia","video","current","srcObject","error","handleCaptureOrReset","takePicture","resetCapture","videoElement","canvas","document","createElement","width","videoWidth","height","videoHeight","getContext","drawImage","imageSrc","toDataURL","openModal","modalName","closeModal","handleSubmit","name","parts","split","Image","public","private","keyResponse","keys","new_public","new_private","response1","concat","_id","method","headers","body","JSON","stringify","updated","username","id","image","faceMatchResult","matchedFaces","matchResult","tokenResponse","service","user_public_key","data","message","transaction_id","updatetrans","transactions","children","ref","autoPlay","style","onClick","icon","src","alt","maxWidth","maxHeight","objectFit","objectPosition"],"sources":["/Users/ashwin/Downloads/echo2.github.io/src/components/verify.js"],"sourcesContent":["import './google.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCamera } from '@fortawesome/free-solid-svg-icons'; // Import the camera icon\nimport { useAuthContext } from '../hooks/useAuthContext';\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Import useNavigate\nimport { useLogout } from \"../hooks/useLogout\";\n\n\nconst Rectangle = () => {\n  return (\n    <div className=\"rectangle\"></div>\n  );\n}\n\nconst Verify= () => {\n\n  const { user,dispatch } = useAuthContext();\n  const navigate = useNavigate();\n  const videoRef = useRef(null);\n  const [stream, setStream] = useState(null);\n  const [capturedImage, setCapturedImage] = useState(null);\n  \nconst { logout } = useLogout()\n    const handleLogout = () => {\n        logout()\n    };\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      console.log(\"fetching user\");\n\n\n      const response = await fetch(\"http://localhost:4000/auth/googleUser\", {\n        credentials: 'include',\n        mode: 'cors'\n      });\n\n      console.log(\"fetched user:\");\n\n  \n      const json = await response.json();\n      console.log(json);\n  \n      if (response.ok) {\n        dispatch({ type: \"LOGIN\", payload: json })\n      }\n    };\n  \n    fetchUser();\n  }, [dispatch]);\n    const [showContactModal, setShowContactModal] = useState(false);\n    const [showLoginModal, setShowLoginModal] = useState(false);\n    const getWebcam = async () => {\n      try {\n        const mediaStream = await navigator.mediaDevices.getUserMedia({ video: true });\n        setStream(mediaStream);\n        if (videoRef.current) {\n          videoRef.current.srcObject = mediaStream;\n        }\n      } catch (error) {\n        console.error('Error accessing the webcam', error);\n      }\n    };\n  \n    const handleCaptureOrReset = () => {\n      if (capturedImage) {\n        // Reset for a new capture\n        setCapturedImage(null);\n        getWebcam();\n      } else {\n        // Capture the image\n        takePicture();\n      }\n    };\n    const resetCapture = async () => {\n      setCapturedImage(null);\n      await getWebcam(); // Restart webcam\n    };\n    const takePicture = () => {\n      if (stream && videoRef.current) {\n        const videoElement = videoRef.current;\n        const canvas = document.createElement('canvas');\n        canvas.width = videoElement.videoWidth;\n        canvas.height = videoElement.videoHeight;\n        canvas.getContext('2d').drawImage(videoElement, 0, 0, canvas.width, canvas.height);\n        \n        const imageSrc = canvas.toDataURL('image/png');\n        setCapturedImage(imageSrc);\n  \n        // Optionally stop the webcam stream\n        // stream.getTracks().forEach(track => track.stop());\n        // setStream(null);\n      }\n    };\n    useEffect(() => {\n      getWebcam();\n    }, []);\n  \n    const openModal = (modalName) => {\n      if (modalName === 'showContactModal') {\n        setShowContactModal(true);\n      } else if (modalName === 'showLoginModal') {\n        setShowLoginModal(true);\n      }\n    };\n  \n    const closeModal = (modalName) => {\n      if (modalName === 'showContactModal') {\n        setShowContactModal(false);\n      } else if (modalName === 'showLoginModal') {\n        setShowLoginModal(false);\n      }\n    };\n    \n    const handleSubmit = async () => {\n      console.log(\"name\", user.name);\n      console.log('Submit this image:', capturedImage);\n      const parts = capturedImage.split(',');\n      const Image = parts[1];\n      \n      // Check if the data is 'placeholder'\n      if (user.public === 'placeholder' && user.private === 'placeholder') {\n        // Fetch the keys from the server\n        const keyResponse = await fetch(\"http://localhost:5000/create_key\");\n        \n        const keys = await keyResponse.json();\n        console.log(\"key\", keys)\n        // Update the user object with the received keys\n        const new_public = keys.public;\n        const new_private = keys.private;\n        user.public=keys.public;\n        user.private = keys.private;\n        console.log(\"JSON\",keys.public, keys.private)\n        console.log(\"After Defined\",new_public, new_private)\n        const response1 = await fetch(`http://localhost:4000/api/person/${user._id}`, {\n        method: \"PATCH\",\n        credentials: 'include',\n        mode: 'cors',\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          public : new_public,\n          private : new_private\n        })\n      });\n      if (response1.ok) {\n        console.log(\"NEW\",new_public, new_private)\n        console.log(\"OK\",user.public, user.private)\n        const updated = await response1.json();\n        dispatch({ type: \"LOGIN\", payload: updated })\n      }\n\n      \n      }\n    \n      const response = await fetch(\"http://localhost:4000/api/data/face\", {\n        method: \"POST\",\n        credentials: 'include',\n        mode: 'cors',\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          username: user.id,\n          image: Image\n        })\n      });\n    \n      console.log(\"fetched user:\");\n    \n      const json = await response.json();\n      console.log(json);\n    \n      // Extracting face match result\n      const faceMatchResult = json.matchedFaces[0].matchResult;\n    \n      // Conditional routing based on face match result\n      if (faceMatchResult === 1) {\n        navigate('../verified'); // Redirect to verified.js if match is found\n        //mint_nft\n        console.log(\"mintingnft\")\n        const tokenResponse = await fetch(\"http://localhost:5000/create_token\" , {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          service: \"Uber\",\n          user_public_key: user.public\n        })\n      });\n      \n      const data = await tokenResponse.json();\n      console.log(\"Message:\", data.message);\n      console.log(\"Transaction ID:\", data.transaction_id);\n      const updatetrans = await fetch(`http://localhost:4000/api/person/${user._id}`, {\n        method: \"PATCH\",\n        credentials: 'include',\n        mode: 'cors',\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          transactions: user.transactions.concat(data.transaction_id)\n        })\n      });\n      if (updatetrans.ok) {\n        const updated = await updatetrans.json();\n        dispatch({ type: \"LOGIN\", payload: updated })\n      }\n      } else {\n        navigate('../failed'); // Redirect to failed.js if no match is found\n      }\n    };\n    \n    \n    \n    \n    return (\n      <div className=\"App\">\n      <main className=\"App-main\">\n        <div className=\"video-box\">\n          <h1>Verify</h1>\n          <div className=\"video-container\">\n            {!capturedImage && (\n              <>\n                <video ref={videoRef} autoPlay style={{ width: '100%', height: 'auto' }} />\n                <button className=\"cancel\" onClick={takePicture}>\n                  <FontAwesomeIcon icon={faCamera} />\n                </button>\n              </>\n            )}\n            {capturedImage && (\n              <div className=\"image-preview\">\n                <img src={capturedImage} alt=\"Captured\" style={{ maxWidth: '100%',\n  maxHeight: '100%',\n  width: 'auto',\n  height: 'auto',\n  objectFit: 'contain',\n  objectPosition: 'center'}} />\n                <button className=\"cancel\" onClick={resetCapture}>\n                  Retake Picture\n                </button>\n                <button className=\"cancel\" onClick={handleSubmit}>\n                  Submit\n                </button>\n                <button className=\"cancel\" onClick={handleLogout}>\n                  Cancel\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n  \n}\n\nexport default Verify;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}